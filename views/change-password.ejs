<section>
    <p><strong>Go Back to</strong>&nbsp;&nbsp;<a href="/user/homepage"><strong>Home</strong></a></p>

    <h2>Change Password</h2>
    <% if (message) { %>
        <p><%= message %></p>
    <% } %>
    <form action="/user/change-password" method="post">
        <input type="password" name="oldPassword" placeholder="Old Password" required><br><br>
        <input type="password" name="newPassword" placeholder="New Password" required><br><br>
        <input type="hidden" name="g-recaptcha-response" id="g-recaptcha-response">
        <button type="submit">Change Password</button>
        <button onclick="signOut()">Log Out</button>
    </form>
   
    <p><strong>Don't have an account?</strong> <a href="/user/signup"><strong>Sign up</strong></a></p>
    <p><strong>Already have an account?</strong> <a href="/user/signin"><strong>Sign in</strong></a></p>

</section>

<script src="https://www.google.com/recaptcha/api.js?render=6LcIh9crAAAAADyL_GbY_ixtMi1nJwtl25tmHOox"></script>
<script>
    grecaptcha.ready(function() {
        grecaptcha.execute('6LcIh9crAAAAADyL_GbY_ixtMi1nJwtl25tmHOox', {action: 'change_password'}).then(function(token) {
            document.getElementById('g-recaptcha-response').value = token;
        });
    });

    // Function to handle sign-out
    function signOut() {
        window.location.href = "/user/signout";
    }
</script>
